---

home: /etc/traefik
image: traefik:v1.7
logLevel: DEBUG
log_driver: journald
remember_fact: yourlabs.traefik
remember:
- name: url
  question: |
    What is full url you want to deploy your dashboard to ?
    ie. https://traefik.example.com
  default: https://traefik.{{ ansible_facts.ansible_local.get('yourlabs_fqdn', {}).get('fqdn', inventory_hostname) }}
  regexp: 'https?://\w+\.[\w+.]+'

- name: acme
  question: |
    If you want to use the staging letsencrypt server for testing, type staging
    Otherwise, type production
  default: staging
  choices:
    staging: https://acme-staging.api.letsencrypt.org/directory
    production: https://acme-v01.api.letsencrypt.org/directory
  when: url.startswith('https')

- name: email
  question: What email do you want to declare to letsencrypt ?
  type: email
  when: url.startswith('https')

- name: http_redirect
  question: Do you want to redirect all http to https by default ?
  default: true
  regexp: 'true|false'
  when: url.startswith('https')
